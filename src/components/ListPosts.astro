---
import { type CollectionEntry } from 'astro:content'

interface Post extends Pick<CollectionEntry<'blog'>, 'data'> {
  slug: string;
}

export interface Props {
  posts: Post[]
}

const { posts } = Astro.props
---

<section class="mx-auto max-w-xl space-y-6">
  {
    posts.map(({ slug, data: { title, pubDate = '' } }) => {
      const dateTime = new Date(pubDate).toLocaleDateString()
      return (
        <article>
          <a
            href={slug}
            class:list={[
              'ml-2 block rounded-sm p-1',
              'text-foreground/80 hover:text-foreground focus-visible:text-foreground',
              'block',
              'transition-colors',
            ]}
          >
            <h2 title={title} class="truncate text-base tracking-wide">
              {title}
            </h2>
            <time
              class="text-xs text-foreground/60 sm:text-sm"
              datetime={dateTime}
            >
              {dateTime}
            </time>
          </a>
        </article>
      )
    })
  }
</section>
